{"version":3,"sources":["webpack:///./src/pages/championship.js","webpack:///./src/lib/utils.js"],"names":["data","categories","genders","allResults","allResultsCsv","edges","map","node","filter","result","Long","Short","bestResults","distance","gender","category","fields","Category","Distance","sort","compareTimes","push","columns","Header","accessor","width","id","d","to","athlete_slug","athlete_name","race_slug","Description","defaultPageSize","className","query","compareTotals","a","b","parseFloat","Total","compareRaceDates","Date","as","Time","split","bs","length","i","aa","parseInt","bb"],"mappings":"qQAOe,sBAWb,IAX4B,IAAZA,EAAW,EAAXA,KAEVC,EAAa,CAAC,UAAW,UAAW,WAAY,UAAW,gBAAiB,uBAC5EC,EAAU,CAAC,IAAK,KAGhBC,EAD+BH,EAA7BI,cAAiBC,MAEtBC,KAAI,qBAAGC,QACPC,QAAO,SAAAC,GAAM,MAAoB,MAAhBA,EAAOC,MAAiC,MAAjBD,EAAOE,SAE5CC,EAAc,GAVO,aAWtB,IAAMC,EAAQ,KAXQ,+GAYdC,EAZc,iHAaZC,EAbY,EAkBjBN,EAJsBN,EACvBK,QAAO,SAAAC,GAAM,OAAIA,EAAOO,OAAOC,WAAgBH,EAA9B,IAAwCC,GAAcN,EAAOS,WAAaL,KAC3FM,KAAKC,KAEuB,GAC3BX,GACFG,EAAYS,KAAKZ,IAPrB,EAAuBR,EAAvB,wDAAmC,CAAC,IAAD,2BADrC,EAAqBC,EAArB,wDAA8B,CAAC,IAAD,2BADhC,MAVkB,CAAC,KAAM,KAAM,OAAQ,QAUvC,eAAmC,IAenC,OACE,kBAAC,IAAD,KACE,sDACA,kBAAC,IAAD,CACEF,KAAMY,EACNU,QAAS,CACP,CACEC,OAAQ,WACRC,SAAU,WACVC,MAAO,IAET,CACEF,OAAQ,WACRC,SAAU,kBACVC,MAAO,KAET,CACEF,OAAQ,OACRG,GAAI,OACJF,SAAU,SAAAG,GAAC,OAAI,kBAAC,IAAD,CAAMC,GAAE,IAAMD,EAAEX,OAAOa,cAAiBF,EAAEX,OAAOc,eAChEL,MAAO,KAET,CACEF,OAAQ,OACRG,GAAI,OACJF,SAAU,SAAAG,GAAC,OAAI,kBAAC,IAAD,CAAMC,GAAE,IAAMD,EAAEX,OAAOe,WAAcJ,EAAEK,cACtDP,MAAO,KAET,CACEF,OAAQ,OACRC,SAAU,OACVC,MAAO,MAGXQ,gBAAiB,GACjBC,UAAU,0BAMX,IAAMC,EAAK,c,gKCpELC,EAAgB,SAACC,EAAGC,GAC/B,OAAIC,WAAWF,EAAEG,MAAO,IAAMD,WAAWD,EAAEE,MAAO,IACzC,EAELD,WAAWF,EAAEG,MAAO,IAAMD,WAAWD,EAAEE,MAAO,KACxC,EAEH,GAGIC,EAAmB,SAACJ,EAAGC,GAClC,OAAID,EAAE,GAAGK,KAAOJ,EAAE,GAAGI,MACX,EAENL,EAAE,GAAGK,KAAOJ,EAAE,GAAGI,KACZ,EAEF,GAaItB,EAAe,SAACiB,EAAGC,GAC9B,IAAMK,EAAKN,EAAEO,KAAKC,MAAM,KAClBC,EAAKR,EAAEM,KAAKC,MAAM,KACxB,GAAIF,EAAGI,SAAWD,EAAGC,OAAQ,OAAOJ,EAAGI,OAASD,EAAGC,OAEnD,IAAK,IAAIC,EAAI,EAAGA,EAAGL,EAAGI,OAAQC,IAAK,CACjC,IAAIC,EAAKC,SAASP,EAAGK,IACjBG,EAAKD,SAASJ,EAAGE,IACrB,GAAIC,IAAOE,EAAI,OAAOF,EAAKE,EAE7B,OAAO","file":"component---src-pages-championship-js-21c508aa9bbd144e01ad.js","sourcesContent":["import React from \"react\"\nimport { graphql, Link } from \"gatsby\"\nimport Layout from \"../components/layout\"\nimport \"react-table/react-table.css\"\nimport ReactTable from \"react-table\"\nimport { compareTimes } from '../lib/utils';\n\nexport default ({ data }) => {\n  const distances = [\"10\", \"15\", \"21.1\", \"42.2\"]\n  const categories = ['Juniors', 'Seniors', 'Veterans', 'Masters', 'Grand Masters', 'Great Grand Masters'];\n  const genders = ['M', 'F'];\n\n  const { allResultsCsv: { edges } } = data\n  const allResults = edges\n    .map(({ node }) => node)\n    .filter(result => result.Long === \"1\" || result.Short === \"1\")\n\n  const bestResults = [];\n  for (const distance of distances) {\n    for (const gender of genders) {\n      for (const category of categories) {\n        const qualifyingResults = allResults\n          .filter(result => result.fields.Category === `${gender} ${category}` && result.Distance === distance)\n          .sort(compareTimes);\n\n        let result = qualifyingResults[0];\n        if (result) {\n          bestResults.push(result)\n        }\n      }\n    }\n  }\n\n  return (\n    <Layout>\n      <h1>Championship Standings</h1>\n      <ReactTable\n        data={bestResults}\n        columns={[\n          {\n            Header: \"Distance\",\n            accessor: \"Distance\",\n            width: 80\n          },\n          {\n            Header: \"Category\",\n            accessor: \"fields.Category\",\n            width: 200\n          },\n          {\n            Header: \"Name\",\n            id: \"Name\",\n            accessor: d => <Link to={`/${d.fields.athlete_slug}`}>{d.fields.athlete_name}</Link>,\n            width: 200\n          },\n          {\n            Header: \"Race\",\n            id: \"Race\",\n            accessor: d => <Link to={`/${d.fields.race_slug}`}>{d.Description}</Link>,\n            width: 300\n          },\n          {\n            Header: \"Time\",\n            accessor: \"Time\",\n            width: 150\n          }\n        ]}\n        defaultPageSize={15}\n        className=\"-striped -highlight\"\n      />\n    </Layout>\n  )\n}\n\nexport const query = graphql`\n{\n  allResultsCsv {\n    edges {\n      node {\n        id\n        Category_Position\n        Date\n        Description\n        Distance\n        Firstname\n        Long\n        Short\n        Surname\n        Time\n        fields {\n          Category\n          athlete_name\n          athlete_slug\n          race_slug\n        }\n      }\n    }\n  }\n}`\n","export const toTitleCase = (str) =>\n  str.replace(\n    /([^\\W_]+[^\\s-]*) */g,\n    (txt) => txt.charAt(0).toUpperCase() + txt.substr(1).toLowerCase()\n  );\n\nexport const compareTotals = (a, b) => {\n  if (parseFloat(a.Total, 10) < parseFloat(b.Total, 10)) {\n    return 1;\n  }\n  if (parseFloat(a.Total, 10) > parseFloat(b.Total, 10)) {\n    return -1;\n  }\n  return 0;\n};\n\nexport const compareRaceDates = (a, b) => {\n  if (a[0].Date < b[0].Date) {\n    return -1;\n  }\n  if (a[0].Date > b[0].Date) {\n    return 1;\n  }\n  return 0;\n};\n\nexport const compareStrings = (field) => (a, b) => {\n  if (a[field] < b[field]) {\n    return -1;\n  }\n  if (a[field] > b[field]) {\n    return 1;\n  }\n  return 0;\n};\n\nexport const compareTimes = (a, b) => {\n  const as = a.Time.split('.');\n  const bs = b.Time.split('.');\n  if (as.length !== bs.length) return as.length - bs.length;\n\n  for (let i = 0; i< as.length; i++) {\n    let aa = parseInt(as[i]);\n    let bb = parseInt(bs[i]);\n    if (aa !== bb) return aa - bb;\n  }\n  return 0;\n};\n\nexport const toSlug = (str) => str.replace(/ /g, '_');\n\n"],"sourceRoot":""}